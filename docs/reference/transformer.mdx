---
sidebar_position: 3
---

import ReferenceTable from '@site/src/components/generic/reference/table'

# Transformer

## Data structure & behavior
- A transformer's mode can either be display, in or out
- The <i>transformers</i> entry holds the information for these three types of transformation
- A display, in or out is an array of transformers
- The transformers will be called sequentially as per their order in the array

Example
```js
transformers: [
    {
        modes: ['in', 'display'],
        id: "capitalizeFirstLetter",
    },
    {
        modes: ['in', 'display'],
        handler: ({ input }) => {
            if(!input) {
                return ""
            }
            return `{${input}}`
        }
    },
    {
        modes: ['out'],
        template: `<%= destination %>/<%= featureId %>`
    }
]

```
### Modes
#### In
An In transformer is applied to a value before it is presented to the inquirer.
#### Out
An Out transformer is applied to a value after it is presented to the inquirer and filled by the user.
#### Display
A Display transformer is applied to a value only for display formatting.


## Create
Create a project wide transformer in the form of a _cliNext file in <b>src/transformers/{in|out|display}</b>.

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },
                {
                    id: "acceptedValues",
                    label:"Accepted values", 
                },
                {
                    id: "example",
                    label:"Example", 
                },] 
        },
        rows: 
        [
            {
                parameter: "_clinextType", 
                type: "string", 
                description: "CliNext module type", 
                defaultValue: "transformer",
                mandatory: {
                    type: 'boolean',
                    value: true
                },
                acceptedValues: {
                    type: 'values',
                    value: ['transformer']
                },
            },            
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "modes", 
                type: "array", 
                description: "Transformers modes", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                },    
                acceptedValues: {
                    type: 'values',
                    value: ['in', 'out', 'display']
                },        
            },
            {            
                parameter: "handler", 
                type: "function", 
                description: "The handler function.", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                },                
                example: {
                    type: 'element',
                    value: () => <block>{`handler: async ({ input, }) => {
                        return capitalizeFirstLetter(input)
                    }`}</block>
                },
            }, 
            {            
                parameter: "template", 
                type: "string", 
                description: "A template to render with CliNext payload data.", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: false
                },                
                example: `<%= destination %>/<%= extensionId %>`
            },            
            ]
    }} />

## Use
You can declare a transformer in three different ways

### File based

Pass the id of the transformer in the corresponding section of the <i>transformers</i> section.

```js
 transformers: [
   {
      id: 'myDisplayTransformerId',
      params: {
        myParam1: true
      }
    }
  ]
```

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },
            {            
                parameter: "modes", 
                type: "array", 
                description: "Transformers modes", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },]
    }} />

Example
```js
 transformers: {
    display: [{
      id: 'isFolderEmpty',
      params: {
        excludeHiddenFiles: true
      }
    }]
  }
```

### Inline

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

<i>Example</i>

```js
 transformers: {
    out: ['myOutTransformerId']
  }
```

### Template

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

<i>Example</i>

```js
transformers: {
    out: [{
        template: `<%= destination %>/<%= featureId %>`
    }]
}
```