---
sidebar_position: 5
---

import ReferenceTable from '@site/src/components/generic/reference/table'

# Side Effect

A side effect can be used at any step to change an object (usually the CliNext payload) as a side effect of the step itself.

Example
```json
"sideEffects": [
    {
    "position": "after",
    "type": "payload",
    "name": "databaseURI",
    "template": "mongodb://root:DATABASE_PASSWORD_TO_CHANGE@localhost:<%= appDatabasePort %>/app?authSource=admin&readPreference=primary&ssl=false",
    "conditions": [
        {
            "name": "appDatabaseType",
            "operator": "=",
            "operand": "mongodb"
        }
    ]
    }
]
```

## Data structure
- A transformer can either be a display, in or out
- The <i>transformers</i> entry holds the information for these three types of transformation
- A display, in or out is an array of transformers
- The transformers will be called sequentially as per their order in the array

```js
 transformers: {
    display: ["capitalizeFirstLetter"],
    in: ["capitalizeFirstLetter"]
    out: [
        "capitalizeFirstLetter",
        {
          template: `<%= destination %>/<%= featureId %>`
        }
    ]
  }
```

#### In
An In transformer is applied to a value before it is presented to the inquirer.
#### Out
An Out transformer is applied to a value after it is presented to the inquirer and filled by the user.
#### Display
A Display transformer is applied to a value only for display formatting.


## Create a side effect
Create a project wide side effect in the form of a _cliNext file in <b>src/sideeffects</b>.

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },
                {
                    id: "acceptedValues",
                    label:"Accepted values", 
                },
                {
                    id: "example",
                    label:"Example", 
                },] 
        },
        rows: 
        [
            {
                parameter: "_clinextType", 
                type: "string", 
                description: "CliNext module type", 
                defaultValue: "transformer",
                mandatory: {
                    type: 'boolean',
                    value: true
                },
                acceptedValues: {
                    type: 'values',
                    value: ['transformer']
                },
            },
            {
                parameter: "position", 
                type: "string", 
                description: "The type of transformer. Can be in, out or display", 
                defaultValue: "transformer",
                mandatory:{
                    type: 'boolean',
                    value: true
                },
                acceptedValues: {
                    type: 'values',
                    value: ['in', 'out', 'display']
                },
            },
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "handler", 
                type: "function", 
                description: "The handler function.", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                },                
                example: {
                    type: 'element',
                    value: () => <bloc>{`handler: async ({ input, }) => {
                        return capitalizeFirstLetter(input)
                    }`}</bloc>
                },
            },]
    }} />

## Use
You can declare a transformer in three different ways

### File based

**Quick configuration**
You can pass the id of the transformer in the corresponding section of the <i>transformers</i> section.

```js
 transformers: {
    out: ['myOutTransformerId']
  }
```

** Advanced **
You can pass the id of the transformer in the corresponding section of the <i>transformers</i> section.

```js
 transformers: {
    display: [{
      id: 'myDisplayTransformerId',
      params: {
        myParam1: true
      }
    }]
  }
```

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

Example
```js
 transformers: {
    display: [{
      id: 'isFolderEmpty',
      params: {
        excludeHiddenFiles: true
      }
    }]
  }
```

### Inline

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

<i>Example</i>

```js
 transformers: {
    out: ['myOutTransformerId']
  }
```

### Template

<ReferenceTable    
    types = {{}}
    data={{
        header: {
            columns: [
                {
                    id: "parameter",
                    label:"Parameter", 
                },
                {
                    id: "type",
                    label:"Type", 
                },
                {
                    id: "description",
                    label:"Description", 
                },
                {
                    id: "defaultValue",
                    label:"Default value", 
                },
                {
                    id: "mandatory",
                    label:"Mandatory", 
                },] 
        },
        rows: 
        [
            {
                parameter: "id", 
                type: "string", 
                description: "Transformer id", 
                defaultValue: "",
                mandatory:{
                    type: 'boolean',
                    value: true
                }
            },
            {            
                parameter: "params", 
                type: "object", 
                description: "Transformer payload", 
                defaultValue: "{}",
                mandatory:{
                    type: 'boolean',
                    value: false
                }
            },]
    }} />

<i>Example</i>

```js
transformers: {
    out: [{
        template: `<%= destination %>/<%= featureId %>`
    }]
}
```